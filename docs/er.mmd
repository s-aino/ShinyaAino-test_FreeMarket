# ER Diagram (Mermaid)

```mermaid
erDiagram
    users ||--o{ items : "sells"
    users ||--o{ addresses : "has"
    users ||--o{ comments : "writes"
    users ||--o{ orders : "buys (buyer_id)"

    categories ||--o{ items : "includes"
    items ||--o{ comments : "has"
    items ||--o{ orders : "sold in"
    orders }o--|| addresses : "ships to"

    users {
        bigint id PK
        varchar name
        varchar email
        varchar password
        datetime email_verified_at
        datetime created_at
        datetime updated_at
    }

    categories {
        bigint id PK
        varchar name
        varchar slug
        datetime created_at
        datetime updated_at
    }

    addresses {
        bigint id PK
        bigint user_id FK
        varchar postal_code
        varchar prefecture
        varchar city
        varchar street
        varchar building nullable
        datetime created_at
        datetime updated_at
    }

    items {
        bigint id PK
        bigint user_id FK "seller"
        bigint category_id FK
        varchar title
        text description
        unsigned_int price ">= 0"
        varchar status "active|sold"
        varchar image_path
        varchar brand nullable          
        varchar condition nullable      
        datetime created_at
        datetime updated_at
    }

    comments {
        bigint id PK
        bigint user_id FK
        bigint item_id FK
        text body
        datetime created_at
        datetime updated_at
    }

    orders {
        bigint id PK
        bigint user_id FK "buyer_id"
        bigint item_id FK
        bigint address_id FK
        datetime ordered_at
        varchar status "pending|paid|shipped|completed|cancelled"
        datetime created_at
        datetime updated_at
    }
